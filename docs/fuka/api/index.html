<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FUKA Reference: FUKA Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FUKA Reference
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">FUKA Reference </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md0"></a>
Frankfurt University/Kadath Initial Data branch</h1>
<h4><a class="anchor" id="autotoc_md1"></a>
Author(s)    : L. Jens Papenfort, Samuel D. Tootle, Philippe Grandclément</h4>
<h2><a class="anchor" id="autotoc_md2"></a>
Overview - Updated</h2>
<p>Included are the Frankfurt initial data solvers and utilities based on the Kadath spectral solver library. The original solvers written by the aforementioned authors (hereafter denoted as FUKAv1) are deprecated, but can be obtained by checking out the previous version of FUKA <code>git checkout fukav2.1</code> which are then located in are located in <code>./codes/FUKAv1/[BH, NS, BHNS, BNS, BBH]</code> respectively.</p>
<p>The FUKA solvers from now are can be found in ./codes/FUKA/[BH, NS, BHNS, BNS, BBH] respectively. The latest FUKA solvers includes support for polytropic equations of state as well as tabulated EOS in the standard LORENE format. Examples and additional details can be found in the <a href="https://bitbucket.org/fukaws/fuka/src/fuka/eos/">eos</a> directory.</p>
<p>As of FUKAv2.3, FUKA now supports <em>stellar collapse</em> format equations of state using the <code>GRHayLEOS</code> library. The <code>GRHayL</code> can be found <a href="https://github.com/GRHayL/GRHayL">here</a> and needs to be installed separately before compiling the Kadath library and, after, the FUKA codes.</p>
<h2><a class="anchor" id="autotoc_md3"></a>
FUKAv2.3 Release Notes:</h2>
<h3><a class="anchor" id="autotoc_md4"></a>
Refactored features</h3>
<ol type="1">
<li>Many components of the Kadath library have been refactored to support copy constructor operations<ul>
<li>Note: This only works with memory pools turned off, e.g. <code>-DDEFAULT_KAD_MEM</code> and should only be used for exporting ID solutions to an evolution framework</li>
</ul>
</li>
<li>The EOS module has been overhauled to enable easier incorporation of EOS backends, see e.g. <code>include/EOS/FUKA_EOS_Wrapper.hh</code></li>
<li>The algorithm for computing shells around objects has been revised again enabling more accurate and efficient calculations of highly asymmetric binaries at very close and very large separations.</li>
<li>FUKA Python readers have been refactored to use the new EOS backends.<ul>
<li>New readers have been added to support new ID solutions</li>
</ul>
</li>
<li>The BNS grid has been refactored to allow for external spherical shells. <b>Support for this new feature breaks support for old ID solutions to a degree</b><ul>
<li><b>Old ID solutions are assumed by default</b></li>
<li><b>New solutions are distinguished based on the control <code>new_initial_data on</code> in the <code>sequence_controls</code> section of the INFO file.</b></li>
</ul>
</li>
</ol>
<h3><a class="anchor" id="autotoc_md5"></a>
New Features</h3>
<ul>
<li>A new solver that computes solutions of isolated neutron stars in quasi-isotropic coordinates is now available, see <a href="./codes/FUKA/NS_isotropic/">NS_isotropic</a><ul>
<li>This solver supports irrotational, uniform, and differential rotation models.</li>
<li>Currently differential rotation models are limited to the <a href="https://ui.adsabs.harvard.edu/link_gateway/1989MNRAS.239..153K/doi:10.1093/mnras/239.1.153">KEH law</a></li>
</ul>
</li>
<li>A new solver that computes solutions of differentially rotating neutron stars in XCTS coordinates is now available, see <a href="./codes/FUKA/NS_DIFFROT/">NS_DIFFROT</a></li>
<li>Support for temperature dependent EOS' in <em>stellar collapse</em> format is now available<ul>
<li>Users must first build and install the <a href="https://github.com/GRHayL/GRHayL">GRHayL</a> library before building the Kadath library and, after, the FUKA solvers.</li>
<li>At compile time for the Kadath library and FUKA solvers, <code>cmake</code> searches the environment variables <code>GRHAYL_ROOT</code> for <code>GRHayL</code> resources, so this must be set manually by users.</li>
<li>Also, <code>cmake</code> must be ran with <code>-DGRHAYL_EOS=ON</code></li>
</ul>
</li>
<li>A new suite of exporters are now available for all ID solutions. These exporters leverage the new copy constructors in Kadath to allow for multi-threaded import by evolution frameworks.<ul>
<li>Note: This only works with memory pools turned off, e.g. compiling Kadath and executables with <code>-DDEFAULT_KAD_MEM</code></li>
</ul>
</li>
<li>A new code for computing head-on initial data for two Neutron stars at rest is now available <a href="./codes/FUKA/BNS_headon/">BNS_headon</a></li>
</ul>
<h2><a class="anchor" id="autotoc_md6"></a>
FUKA Maintainer(s):</h2>
<p>Samuel D. Tootle - <a href="#" onclick="location.href='mai'+'lto:'+'too'+'tl'+'e@i'+'tp'+'.un'+'i-'+'fra'+'nk'+'fur'+'t.'+'de'; return false;">tootl<span style="display: none;">.nosp@m.</span>e@it<span style="display: none;">.nosp@m.</span>p.uni<span style="display: none;">.nosp@m.</span>-fra<span style="display: none;">.nosp@m.</span>nkfur<span style="display: none;">.nosp@m.</span>t.de</a></p>
<h2><a class="anchor" id="autotoc_md7"></a>
KADATH Maintainer:</h2>
<p>Philippe Grandclément - <a href="#" onclick="location.href='mai'+'lto:'+'phi'+'li'+'ppe'+'.g'+'ran'+'dc'+'lem'+'en'+'t@o'+'bs'+'pm.'+'fr'; return false;">phili<span style="display: none;">.nosp@m.</span>ppe.<span style="display: none;">.nosp@m.</span>grand<span style="display: none;">.nosp@m.</span>clem<span style="display: none;">.nosp@m.</span>ent@o<span style="display: none;">.nosp@m.</span>bspm<span style="display: none;">.nosp@m.</span>.fr</a></p>
<p>License : GPLv3+ for all other code</p>
<h2><a class="anchor" id="autotoc_md8"></a>
REQUIRED CITATIONS:</h2>
<p>1) L. Jens Papenfort, Samuel D. Tootle, Philippe Grandclément, Elias R. Most, Luciano Rezzolla: <a href="https://arxiv.org/abs/2103.09911">https://arxiv.org/abs/2103.09911</a></p>
<p>2) Philippe Grandclément, <a href="http://dx.doi.org/10.1016/j.jcp.2010.01.005">http://dx.doi.org/10.1016/j.jcp.2010.01.005</a></p>
<h1><a class="anchor" id="autotoc_md9"></a>
1. Purpose</h1>
<p>This collection of ID solvers aims at delivering consistent initial data (ID) solutions to the eXtended Conformal Thin-Sandwich (XCTS) formulation of Einstein's field equations for a variety of compact object configurations.</p>
<p>As each solver has their own specific nuances and considerations, we have included a README in each solver directory to provide a basis for getting started with the respective solver.</p>
<p>Additionally, each initial data has a respective exporter which can be seen in <code>src/Utilities/Exporters</code>. These exporters allow one to compile an interface code for an evolution framework along with the Kadath static library located in <code>$HOME_KADATH/lib</code>, in order to export data based on input grid points.</p>
<h1><a class="anchor" id="autotoc_md10"></a>
2. Modifications from base Kadath</h1>
<p>In addition to the solving routines included within <code>$HOME_KADATH/codes</code>, we also note the major overall modifications and additions that differ from base Kadath.</p><ol type="1">
<li>This branch includes memory optimizations that inspired portions of the optimization (now main) branch</li>
<li>Modification/addition of numerical spaces for the BH, BBH, BNS, and BHNS</li>
<li>Addition of an equation of state infrastructure utilizing Margherita standalone to handle tabulated and polytropic EOS - see <a href="https://bitbucket.org/fukaws/fuka/src/fuka/include/EOS">include/EOS</a></li>
<li>Addition of the Configurator framework to enable extensibility of solvers by managing controls, stages, and key variables - see <a href="https://bitbucket.org/fukaws/fuka/src/fuka/include/Configurator">include/Configurator</a></li>
<li>Addition of exporters for all the previously mentioned ID types - see <a href="https://bitbucket.org/fukaws/fuka/src/fuka/src/Utilities/Exporters">src/Utilities/Exporters</a></li>
</ol>
<p><b>Note: as of summer 2021, the FUKA solvers are based on the deprecated branch of Kadath. Given the optimizations and changes made within the FUKA branch conflict with those implimented in the <code>master</code> branch (previously the <code>optimized</code> branch), a considerable level of effort is required to merge FUKA with the new <code>master</code> branch as well as test to see which optimizations provide better results. Currently, there is no timeline for when this will be done.</b></p>
<h1><a class="anchor" id="autotoc_md11"></a>
3. Public Thorns for use with the Einstein Toolkit</h1>
<p>The following workspace includes the FUKA ID respository (including versioned branches) as well as available thorns for use with the Einstein Toolkit in order to import FUKA ID: <a href="https://bitbucket.org/fukaws/">https://bitbucket.org/fukaws/</a></p>
<h1><a class="anchor" id="autotoc_md12"></a>
4. Compiling KADATH</h1>
<h2><a class="anchor" id="autotoc_md13"></a>
Get the Sources</h2>
<p><code>git clone git@bitbucket.org:fukaws/fuka.git</code></p>
<h2><a class="anchor" id="autotoc_md14"></a>
Set the following environment variables based on your setup in your ~/.bashrc file</h2>
<ul>
<li>HOME_KADATH - e.g., export HOME_KADATH=/home/user/lib/fuka/</li>
<li>KAD_CC - e.g. gcc</li>
<li>KAD_CXX - e.g. g++</li>
<li>KAD_NUMC - number of parallel compiling jobs CMake can run, e.g. 7</li>
</ul>
<h2><a class="anchor" id="autotoc_md15"></a>
Build Process</h2>
<ol type="1">
<li>Go to build_release.</li>
<li>Create a build directory and enter it</li>
<li>Invoke <code>cmake (options) ..</code><ul>
<li>where <code>..</code> denotes the location where the CMakeList.txt file is</li>
<li>The important cmake options are the following (the value in parentheses corresponds to the default settings) :<ul>
<li><code>-DPAR_VERSION = On/Off (On)</code><ul>
<li>Set to On to build the MPI parallel version of the library. The initial data codes within this branch are only designed for use with MPI.</li>
</ul>
</li>
<li><code>-DCMAKE_BUILD_TYPE = Release/Debug</code><ul>
<li>Specifies the build type which results in different compiler options being used</li>
</ul>
</li>
<li><code>-DMPI_CXX_COMPILER = &lt;compiler pile&gt;</code><ul>
<li>Path to the MPI C++ wrapper (when not automatically detected by cmake)</li>
</ul>
</li>
<li><code>-DMPI_C_COMPILER = &lt;compiler pile&gt;</code><ul>
<li>Path to the MPI C wrapper (when not automatically detected by cmake)</li>
</ul>
</li>
<li>(optional) <code>-DDEFAULT_KAD_MEM</code><ul>
<li>Deactivate memory pools to allow for thread-safe exporters. <em><b>Do not use with ID solvers!</b></em></li>
</ul>
</li>
<li>(optional) <code>-DGRHAYL_EOS=ON</code><ul>
<li>Enable support for stellar collapse tables using the GRHayLEOS library.</li>
<li>GRHayL must be installed separately by the user</li>
<li>The environment variables <code>GRHAYL_ROOT</code> must be set by the user to the directory GRHayL was installed to.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<p>Example using GNU+mpi compilers: <code>cmake -DCMAKE_BUILD_TYPE=Release -DPAR_VERSION=On -DMPI_CXX_COMPILER=mpic++ -DMPI_C_COMPILER=mpicc -DGRHAYL_EOS=OFF ..</code></p>
<p>In most HPC systems, <code>cmake</code> will likely not find the dependency libraries that the user may intend. Therefore, one must specify them manually through the <a href="https://bitbucket.org/fukaws/fuka/src/fuka/Cmake/CMakeLocal.cmake">CMakeLocal.cmake</a> file (the <code>fftw</code> and <code>scalapack</code> libraries must usually be provided in this way). Some working <a href="https://bitbucket.org/fukaws/fuka/src/fuka/Cmake/CMakeLocal.cmake">CMakeLocal.cmake</a> files are provided for HPC systems in Germany as well as examples for personal computers.</p>
<p>Once cmake has been successfully invoked, use make -j $KAD_NUMC to start the compilation.</p>
<h2><a class="anchor" id="autotoc_md16"></a>
Compiling the library with the compile script</h2>
<p>A script called <a href="https://bitbucket.org/fukaws/fuka/src/fuka/build_release/compile">compile</a> is also provided that can be used to facilitate the installation process. So long as the above environment variables are set and the libraries are found, no additional input is necessary. Run the compile script within the <code>build_release</code> directory using</p>
<p><code>. compile</code></p>
<p>in order to build the library.</p>
<h2><a class="anchor" id="autotoc_md17"></a>
Compiling FUKA solvers</h2>
<p>The above mentioned <a href="https://bitbucket.org/fukaws/fuka/src/fuka/build_release/compile">compile script</a> has been added as a symbolic link to the FUKAv1 and FUKAv2 solver directories for convenience to compile the individual solvers.</p>
<h1><a class="anchor" id="autotoc_md18"></a>
5. Dependencies</h1>
<ol type="1">
<li>C++ compiler - gcc is recommended<ul>
<li>Must support c++17 standards</li>
<li>Must support <code>&lt;filesystem&gt;</code></li>
</ul>
</li>
<li>Cmake</li>
<li>git</li>
<li>FFTW3</li>
<li>GSL</li>
<li>scaLAPACK</li>
<li>MPI</li>
<li>Boost</li>
<li>Boost::python (to compile <a href="https://bitbucket.org/fukaws/fuka/src/fuka/codes/PythonTools/">PythonTools</a>)</li>
<li>(optional) <a href="https://github.com/GRHayL/GRHayL">GRHayL</a> </li>
</ol>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
