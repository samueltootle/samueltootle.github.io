<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FUKA: Black Hole</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<!-- <script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init()
</script> -->
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FUKA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('bhxcts.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Black Hole </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md28"></a>
Black Hole (BH) Initial Data</h1>
<h1><a class="anchor" id="autotoc_md29"></a>
Overview</h1>
<p>The isolated BH code was created to test many aspects of the initial data creation such as formalism implementation, initial guess generation, and import into an evolution framework. It has now become a critical piece in generating binary ID that include a BH companion. The codes included here are simply the means for a user to generate an isolated BH and analyze it. <br  />
 This is an excellent way for a new user to get acquainted with how the FUKAv2 solvers work since the interface is similar amongst the v2 solvers by design.</p>
<h1><a class="anchor" id="autotoc_md30"></a>
Organization</h1>
<ol type="1">
<li><code>CMakeLists.txt</code> is the file needed by CMake to compile the codes</li>
<li><code>compile</code> is a symbolic link to the script stored in <code>$HOME_KADATH/build_release</code> to ease compiling</li>
<li><code>src</code> directory contains the relevant source files:<ul>
<li><code>solve.cpp</code>: the one and done solve code</li>
<li><code>reader.cpp</code>: the reader can provide diagonstics from ID solutions that are computed from the ID</li>
</ul>
</li>
</ol>
<h1><a class="anchor" id="autotoc_md31"></a>
Basic Usage</h1>
<ol type="1">
<li>Generate the initial config file by running <code>solve</code> for the first time</li>
<li>Modify the initial config file based on ID characteristics you are interested in</li>
<li>Rerun (using parallelization) using this config file, e.g. <code>mpirun ./bin/Release/solve initial_bh.info</code></li>
</ol>
<h1><a class="anchor" id="autotoc_md32"></a>
Your first run!</h1>
<ol type="1">
<li>Generate the initial config file by running <code>solve</code> for the first time</li>
<li>Rerun (using parallelization) using this config file, e.g. <code>mpirun ./bin/Release/solve initial_bh.info</code></li>
<li>This will result in the generation of a pair of files containing the solution: <code>BH_TOTAL_BC.0.5.0.09.&lt;info/dat&gt;</code></li>
</ol>
<p>We can deconstruct the name to make it understandable:</p>
<ul>
<li><code>BH_TOTAL_BC.</code> denotes a converged BH solution after the <code>TOTAL_BC</code> stage. This is meant to distinguish the solution from other stages suched as the boosted BH stage. This also distinquishes it from checkpoints that can be turned on which are saved to file during each iteration of the solver</li>
<li><code>0.5.0.</code>: In this case, we have a 0.5M BH with a dimensionless spin of zero</li>
<li><code>0.09.</code>: No additional spherical shells have been added and the global resolution is nine collocation points in the radial and theta direction with 8 points in the phi direction</li>
<li><code>info</code>: The info file contains all the steering parameters, values used in creating the domain decomposition, stored fields, stages, settings, and controls</li>
<li><code>dat</code>: The dat file is a binary file that contains the numerical space and the variable fields</li>
</ul>
<p>The default configuration for an isolated BH has a mass of 0.5M and non-spinning. Aside from the diagnostics observed during the solver stage, we can use the reader to verify the ID. This can be done by running:</p>
<p><code>./bin/Release/reader BH_TOTAL_BC.0.5.0.0.09.info</code></p>
<p>Which results in the following:</p>
<div class="fragment"><div class="line">        RES = [+9,+9,+8]</div>
<div class="line"> Coord R_IN = +0.20812</div>
<div class="line">    Coord R = +0.42977</div>
<div class="line">Coord R_OUT = +1.66493</div>
<div class="line"> </div>
<div class="line">    Areal R = +1.00000</div>
<div class="line">      LAPSE = [+0.43494, +0.43494]</div>
<div class="line">        PSI = [+1.52539, +1.52539]</div>
<div class="line"> </div>
<div class="line">       Mirr = +0.50000[+0.50000]</div>
<div class="line">        Mch = +0.50000[+0.50000]</div>
<div class="line">        Chi = -0.00000[+0.00000]</div>
<div class="line"> </div>
<div class="line">      Omega = -3.02175e-17</div>
<div class="line"> Komar mass = +4.97314e-01</div>
<div class="line">   Adm mass = +5.00087e-01, Diff: +5.56053e-03</div>
<div class="line">Adm moment. = +3.14400e-14</div>
<div class="line">         Px = +1.22876e-15</div>
<div class="line">         Py = -2.36096e-16</div>
<div class="line">         Pz = +0.00000e+00</div>
</div><!-- fragment --><p>The first block contains information related to the numerical space specifically the</p>
<ul>
<li>resolution <code>[r,theta,phi]</code></li>
<li>the coordinate radii related to the domain decomposition.</li>
</ul>
<p>The second block includes the</p>
<ul>
<li>proper radius of the horizon</li>
<li><code>[min, max]</code> of the lapse and conformal factor on the horizon.</li>
</ul>
<p>The third block contains the</p>
<ul>
<li>measured values of the fixing parameters:<ul>
<li>Christodoulou mass (MCH)</li>
<li>irreducible mass (MIRR)</li>
<li>the dimensionless spin parameter (CHI)</li>
</ul>
</li>
<li>brackets are the values stored in the config file that the solution was fixed by</li>
</ul>
<p>Finally, the fourth block contains the</p>
<ul>
<li>variable spin frequency (Omega)</li>
<li>Komar mass</li>
<li>ADM quantities</li>
</ul>
<p><b> Note:</p><ol type="1">
<li>In all blocks, brackets denote the values stored in the config file that the solution was fixed by</li>
<li>The <code>Diff</code> noted by the ADM mass is the symmetric difference between the ADM and Komar mass.</li>
</ol>
<p></b></p>
<p><b></b></p>
<h1><a class="anchor" id="autotoc_md33"></a>
Understanding the BH INFO file</h1>
<p>Using your favorite text editor, you can open up the <code>initial_bh.info</code>. We will go through the file, but we'll discuss only the details relevant to the BH case. For details on all the parameters you can see more in <a href="https://bitbucket.org/fukaws/fuka/src/fuka/include/Configurator/">Configurator README</a>.</p>
<p><b> Notes:</b></p>
<p><b></p><ol type="1">
<li>It is always best practice to generate new ID using the <code>initial_bh.info</code>. Using old initial data unless for very small changes in <code>chi</code> is inefficient.</li>
<li>In FUKAv2.2 a minimal Config file was introduced such that only the basic fixing parameters most relevant to users are shown. This minimal Config file can be bypassed by running: <pre class="fragment">solve full
</pre> to obtain the full Config file. Although useful for development, there is little advantage to using the full Config.</li>
</ol>
<p></b></p>
<p><b></b></p>
<h2><a class="anchor" id="autotoc_md34"></a>
BH Fixing parameters</h2>
<div class="fragment"><div class="line">bh</div>
<div class="line">{</div>
<div class="line">    chi 0</div>
<div class="line">    mch 0.5</div>
<div class="line">    res 9</div>
<div class="line">}</div>
</div><!-- fragment --><p>The above includes parameters that can be fixed by the user as well as parameters that are automated in the background and should not be changed. Those most relevant to generating ID of interest are</p>
<ul>
<li><code>chi</code>: the dimensionless spin parameter <code>[-0.84, 0.84]</code></li>
<li><code>mch</code>: the Christodoulou mass</li>
<li><code>res</code>: the final global resolution of interest (this will be discussed more below)</li>
</ul>
<h2><a class="anchor" id="autotoc_md35"></a>
Fields</h2>
<div class="fragment"><div class="line">fields</div>
<div class="line">{</div>
<div class="line">    conf on</div>
<div class="line">    lapse on</div>
<div class="line">    shift on</div>
<div class="line">}</div>
</div><!-- fragment --><p>Within the full Config or the output solutions, <code>Fields</code> document the fields that are used in the solver and stored in the <code>dat</code> file. Changing this has no impact.</p>
<h2><a class="anchor" id="autotoc_md36"></a>
Stages</h2>
<div class="fragment"><div class="line">stages</div>
<div class="line">{</div>
<div class="line">    total_bc on</div>
<div class="line">}</div>
</div><!-- fragment --><p>For the isolated BH, only the <code>TOTAL_BC</code> is relevant. Old stages available in the original v1 solver are since deprecated.</p>
<h2><a class="anchor" id="autotoc_md37"></a>
Relevant Controls</h2>
<div class="fragment"><div class="line">sequence_controls</div>
<div class="line">{</div>
<div class="line">    checkpoint off</div>
<div class="line">    fixed_lapse off</div>
<div class="line">}</div>
</div><!-- fragment --><ul>
<li><code>checkpoint</code>: this will result in checkpoints being saved to file during each solving iteration - mainly helpful for high resolution binary ID</li>
<li><code>fixed_lapse</code>: toggling this control enables a fixed lapse on the horizon - not recommended</li>
</ul>
<h2><a class="anchor" id="autotoc_md38"></a>
Sequence Settings</h2>
<div class="fragment"><div class="line">sequence_settings</div>
<div class="line">{</div>
<div class="line">    solver_max_iterations 15</div>
<div class="line">    solver_precision 1e-08</div>
<div class="line">    initial_resolution 9</div>
<div class="line">}</div>
</div><!-- fragment --><ul>
<li><code>solver_max_iterations</code>: set the number of iterations not to exceed</li>
<li><code>solver_precision</code>: Determines what is the maximum precision allowed by the solver that determines whether or not the solution has converged</li>
<li><code>initial_resolution</code>: by default all solutions are ran at at a default resolution of <code>[9,9,8]</code> prior to regridding to a higher resolution. In the event one wants to increase the default <code>initial_resolution</code>, it can be done here</li>
</ul>
<h1><a class="anchor" id="autotoc_md39"></a>
Your Second run!</h1>
<p>Now that you've generated the simplest case and we have a better understanding of the config file, we can try something more interesting</p>
<ol type="1">
<li>Open the initial config file in your favorite editor</li>
<li>Set<ul>
<li><code>mch 1</code></li>
<li><code>chi 0.84</code></li>
<li><code>res 11</code></li>
</ul>
</li>
<li>Run (using parallelization) using this config file, e.g. <code>mpirun ./bin/Release/solve initial_bh.info</code></li>
</ol>
<p>Many things will run differently this time! Most noteably are the following:</p>
<ol type="1">
<li>Even though the resolution was set to <code>res 11</code>, the initial solution is always constructed using <code>initial_resolution</code> value first. Currently the default initial resolution is <code>[9,9,8]</code>.</li>
<li>Given the <code>chi</code> used is close to the maximum possible with the maximally sliced, flat background XCTS, an interative procedure is done automatically to avoid the solution diverging. This is done in three steps to ensure convergence <pre class="fragment">1. `chi = 0.5`
2. `chi = 0.8`
3. `chi = 0.84`
</pre></li>
<li>Once the desired <code>chi</code> is achieved, the solution is regridded to a new grid with the desired final resolution</li>
<li>With the new initial guess based on the low resolution solution, a final solving stage is conducted to obtain the desired ID</li>
<li>This results in the converged dataset of <code>BH_TOTAL_BC.1.0.84.0.11.info/dat</code>, however, the other implicit solutions have been saved as well.</li>
</ol>
<p>We can of course verify that the ID matches our expectation using</p>
<p><code>./bin/Release/reader BH_TOTAL_BC.1.0.84.0.11.info</code></p>
<div class="fragment"><div class="line">        RES = [+11,+11,+10]</div>
<div class="line"> Coord R_IN = +0.32502</div>
<div class="line">    Coord R = +0.54163</div>
<div class="line">Coord R_OUT = +2.60012</div>
<div class="line"> </div>
<div class="line">    Areal R = +1.75647</div>
<div class="line">      LAPSE = [+0.28547, +0.32448]</div>
<div class="line">        PSI = [+1.75317, +1.82613]</div>
<div class="line"> </div>
<div class="line">       Mirr = +0.87823[+0.87823]</div>
<div class="line">        Mch = +1.00000[+1.00000]</div>
<div class="line">        Chi = +0.84000[+0.84000]</div>
<div class="line"> </div>
<div class="line">      Omega = -3.03075e-01</div>
<div class="line"> Komar mass = +1.00517e+00</div>
<div class="line">   Adm mass = +1.00629e+00, Diff: +1.11392e-03</div>
<div class="line">Adm moment. = +8.39740e-01</div>
<div class="line">         Px = +4.19768e-15</div>
<div class="line">         Py = -3.99361e-15</div>
<div class="line">         Pz = +0.00000e+00</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md40"></a>
How BH ID is Generated</h1>
<h2><a class="anchor" id="autotoc_md41"></a>
Initial Setup</h2>
<p>In initial data generation, the initial setup is the most crucial. When starting the BH solver from scratch we need to determine an initial guess for the input mass and aspin - <code>mch</code>, <code>chi</code>. For this a crude estimate is generated based on a fixed value of the conformal factor of <code>conf = 1.55</code> to determine the domain decomposition and initial guess of the excision radius of </p><pre class="fragment">`rmid = 2 * mch / conf^2`
</pre><p> In the domain near the excision region, <code>conf = 1.55</code> and <code>conf = 1</code> everywhere else. <code>lapse = 1</code> and <code>shift = 0</code>.</p>
<h2><a class="anchor" id="autotoc_md42"></a>
TOTAL_BC Stage</h2>
<p>With the initial guess generated, a rotating solution is now found based on the input mass <code>mch</code> and dimensionless spin <code>chi</code> fixing parameters.</p>
<h2><a class="anchor" id="autotoc_md43"></a>
Automated iterative spin</h2>
<p>For highly spinning BH configurations using a conformally flat background, it has been found to be necessary to obtain lower spinning solutions prior to a highly spinning one. Therefore, an initial spin of <code>chi = 0.5</code> is used before attempting spins up to <code>chi = 0.8</code>. For spins near the XCTS spin limit of approximately <code>chi = 0.84</code>, an intermediate solution is obtained at <code>chi = 0.8</code> before attempting <code>chi &gt; 0.8</code>.</p>
<h2><a class="anchor" id="autotoc_md44"></a>
Automated resolution increase</h2>
<p>Once the above procedures are completed for the last stage and the input <code>res</code> is higher than the <code>initial_resolution</code>, the low resolution solution is interpolated onto the higher resolution numerical grid and is used as the initial guess before running the last stage again. No additional iterative procedures are required at this point. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
