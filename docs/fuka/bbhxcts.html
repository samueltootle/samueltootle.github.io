<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FUKA: Binary Black Hole</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<!-- <script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init()
</script> -->
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FUKA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('bbhxcts.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Binary Black Hole </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md11"></a>
Binary Black Hole (BBH) Initial Data</h1>
<h1><a class="anchor" id="autotoc_md12"></a>
Overview</h1>
<p>Here lies the binary black hole initial data solver and diagnostic code. The initial data is constructed using maximal slicing with a flat spacial metric. Therefore, the dimensionless spins of the black holes are limited to approximately <code>[-0.84, 0.84]</code>. The v2 code is a vast improvement over the v1 code as it uses super-imposed BH solutions to initialize the binary instead of building the binary from flat space. When comparing to FUKAv1, generating equal-mass non-rotating ID is roughly <code>&gt;4x</code> faster due to the reduced number of stages. When comparing to FUKAv1, generating arbitrary spin and unequal mass, the cost savings is roughly <code>(4 + N)x</code> faster where N is, in the case of FUKAv1, the number of iterative solutions needed to achieve a given mass ratio and spin.</p>
<p><b> Note:</b></p>
<p><b></p><ul>
<li>When referring to <code>Mtot</code> below, we will be referring to the sum of the individual Christodoulou masses <code>Mtot := (MCH_MINUS + MCH_PLUS)</code> where plus and minus simply refer to their location on the x-axis.</li>
<li><code>q &lt;= 1</code> is built into the FUKAv2 codes</li>
</ul>
<p></b></p>
<p><b></b></p>
<h1><a class="anchor" id="autotoc_md13"></a>
Organization</h1>
<ol type="1">
<li><code>CMakeLists.txt</code> is the file needed by CMake to compile the codes</li>
<li><code>compile</code> is a symbolic link to the script stored in <code>$HOME_KADATH/build_release</code> to ease compiling</li>
<li><code>src</code> directory contains the relevant source files:<ul>
<li><code>solve.cpp</code>: the one and done solve code</li>
<li><code>reader.cpp</code>: the reader can provide diagonstics from ID solutions that are computed from the ID</li>
</ul>
</li>
</ol>
<h1><a class="anchor" id="autotoc_md14"></a>
Basic Usage</h1>
<ol type="1">
<li>Generate the initial config file by running <code>solve</code> for the first time</li>
<li>Modify the initial config file based on ID characteristics you are interested in</li>
<li>Rerun (using parallelization) using this config file, e.g. <code>mpirun ./bin/Release/solve initial_bbh.info</code></li>
</ol>
<h1><a class="anchor" id="autotoc_md15"></a>
Your first run!</h1>
<ol type="1">
<li>Generate the initial config file by running <code>solve</code> for the first time</li>
<li>Rerun (using parallelization) using this config file, e.g. <code>mpirun ./bin/Release/solve initial_bbh.info</code></li>
<li>This will result in the generation of a pair of files containing the solution: <code>BBH_ECC_RED.10.0.0.1.q1.3.3.09.&lt;info/dat&gt;</code></li>
</ol>
<p>We can deconstruct the name to make it understandable:</p>
<ul>
<li><code>BBH_ECC_RED.</code> denotes a converged BBH solution after the eccentricity reduction stage is completed which uses 3.5th order PN estimates for the orbital frequency and radial infall velocity. This is meant to distinguish the solution from earlier stages which will be discussed later. This also distinquishes it from checkpoints that can be turned on which are saved to file during each iteration of the solver</li>
<li><code>10</code>: separation distance in geometric units!</li>
<li><code>0.0.</code>: In this case, both BHs are not spinning</li>
<li><code>1.q1</code>: the total mass and mass ratio are equal to one</li>
<li><code>0.0.09</code>: <code>nshells = 0</code> for <code>bh1</code>, <code>nshells = 0</code> for <code>bh2</code> where the resolution in each domain is <code>9</code> collocation points in the radial and theta direction with <code>8</code> points in the phi direction</li>
<li><code>.info</code>: The info file contains all the steering parameters, values used in creating the domain decomposition, stored fields, stages, settings, and controls</li>
<li><code>.dat</code>: The dat file is a binary file that contains the numerical space and the variable fields</li>
</ul>
<p>The default configuration for BBH has a total mass of 1M and non-spinning. Aside from the diagnostics observed during the solver stage, we can use the reader to verify the ID. This can be done by running:</p>
<p><code>./bin/Release/reader BBH_ECC_RED.10.0.0.1.q1.0.0.09.info</code></p>
<p>Which results in the following:</p>
<div class="fragment"><div class="line">###################### BH_MINUS ######################</div>
<div class="line">            Center_COM = (-5.00000, 0, 0)</div>
<div class="line">            Coord R_IN = +0.21488</div>
<div class="line">               Coord R = +0.40651</div>
<div class="line">           Coord R_OUT = +1.95318</div>
<div class="line">               Areal R = +1.00000</div>
<div class="line">                 LAPSE = [+0.39317, +0.42512]</div>
<div class="line">                   PSI = [+1.56552, +1.57133]</div>
<div class="line">                  Mirr = +0.50000[+0.50000]</div>
<div class="line">                   Mch = +0.50000[+0.50000]</div>
<div class="line">                   Chi = -0.00000[+0.00000]</div>
<div class="line">                     S = -1.66046e-15</div>
<div class="line">                 Omega = +2.54341e-02</div>
<div class="line">###################### BH_PLUS ######################</div>
<div class="line">            Center_COM = (+5.00000, 0, 0)</div>
<div class="line">###################### Binary ######################</div>
<div class="line">                   RES = [+9,+9,+8]</div>
<div class="line">                     Q = +1.00000</div>
<div class="line">            Separation = +10.00 [+10.00] (+14.77km)</div>
<div class="line">         Orbital Omega = +2.79950e-02</div>
<div class="line">            Komar mass = +9.76165e-01</div>
<div class="line">              Adm mass = +9.91272e-01, Diff: +1.53565e-02</div>
<div class="line">            Total Mirr = +1.00000</div>
<div class="line">             Total Mch = +1.00000</div>
<div class="line">           Adm moment. = +9.61464e-01</div>
<div class="line">        Binding energy = -8.72808e-03</div>
<div class="line">               M * Ome = +2.79950e-02</div>
<div class="line">              E_b / mu = -3.49123e-02</div>
<div class="line">                    Px = -2.79898e-16</div>
<div class="line">                    Py = +1.62586e-16</div>
<div class="line">                    Pz = +0.00000e+00</div>
<div class="line">                  COMx = +1.23895e-13, A-COMx = +1.52244e-11</div>
<div class="line">                  COMy = +2.90536e-15, A-COMy = -4.28121e-12</div>
<div class="line">                A-COMz = +0.00000e+00</div>
</div><!-- fragment --><p>The first two blocks contain information related to the component BHs. These details are covered in the <a href="https://bitbucket.org/fukaws/fuka/src/fuka/codes/FUKAv2_Solvers/BH/">BH README</a>. The only additional parameter is the <code>Center_COM</code>. This is the coordinate center of each object when shifted by the "center-of-mass" of the binary or, more specifically, the location of the axis of rotation for the binary that can approximate a quasi-stationary solution.</p>
<p>The third block contains information specifically related to the binary</p><ul>
<li><code>res</code>: resolution in each numerical domain <code>[r,theta,phi]</code></li>
<li><code>q</code>: mass ratio such that <code>q &lt;= 1</code></li>
<li><code>Separation</code>: coordinate separation <code>d [d/Mtot]</code></li>
<li><code>Orbital Omega</code>: orbital frequency of the binary</li>
<li>Komar mass</li>
<li>ADM quantities</li>
<li><code>E_b / mu</code>: Binding energy normalized by the reduced mass</li>
<li><code>COM&lt;x/y&gt;</code>: shift in the coordinates to find a helical killing vector</li>
<li><code>A-COM&lt;x/y/z&gt;</code>: A numerical calculation of the COM based on the analytical prescription from Osokine+ (REF)</li>
</ul>
<p><b>Note: The <code>Diff</code> noted by the ADM mass is the symmetric difference between the ADM and Komar mass.</b></p>
<h1><a class="anchor" id="autotoc_md16"></a>
Understanding the BBH INFO file</h1>
<p>Using your favorite text editor, you can open up the <code>initial_bbh.info</code>. We will go through the file, but we'll discuss only the details relevant to the BBH case. For details on all the parameters you can see more in <a href="https://bitbucket.org/fukaws/fuka/src/fuka/include/Configurator/">Configurator</a> README.</p>
<p><b> Notes:</b></p>
<p><b></p><ol type="1">
<li>It is always best practice to generate new ID using the <code>initial_bbh.info</code>. Using old initial data unless for very small changes in <code>chi</code> is inefficient.</li>
<li>In FUKAv2.2 a minimal Config file was introduced such that only the basic fixing parameters most relevant to users are shown. This minimal Config file can be bypassed by running: <pre class="fragment">solve full
</pre> to obtain the full Config file. Although useful for development, there is little advantage to using the full Config.</li>
</ol>
<p></b></p>
<p><b></b></p>
<h2><a class="anchor" id="autotoc_md17"></a>
BBH Fixing parameters</h2>
<div class="fragment"><div class="line">binary</div>
<div class="line">{</div>
<div class="line">    distance 10</div>
<div class="line">    outer_shells 0</div>
<div class="line">    res 9</div>
<div class="line">    bh1</div>
<div class="line">    {</div>
<div class="line">        chi 0</div>
<div class="line">        mch 0.5</div>
<div class="line">        res 9</div>
<div class="line">    }</div>
<div class="line">    bh2</div>
<div class="line">    {</div>
<div class="line">        chi 0</div>
<div class="line">        mch 0.5</div>
<div class="line">        res 9</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p>The above includes parameters that must be fixed by the user. The parameters for each BH are simply copied from the isolated solution which can be read in detail in the <a href="https://bitbucket.org/fukaws/fuka/src/fuka/codes/FUKAv2_Solvers/BH/">BH README</a> - the same fixing applies also in the BBH.</p>
<p>The fixing parameters most relevant to the binary are</p>
<ul>
<li><code>distance</code>: this is in geometric units! It is important to pick something reasonable. A general rule for a binary with a few orbits is <code>distance = 8 * Mtot</code>, however this strongly depends on <code>q</code> and the spins of component objects</li>
<li><code>outer_shells</code>: This allows for additional shells to be placed near the compactified domain. This can be helpful for more accurate quasi-equilibrium ID at lower resolution, but otherwise can be ignored and left to zero</li>
<li><code>res</code>: global resolution of the binary!</li>
<li><code>adot</code>: (optional) This is the radial infall velocity parameter when performing eccentricity reduction. This will be discussed more in the eccentricity reduction section below</li>
<li><code>ecc_omega</code>: (optional) This is the fixed orbital velocity parameter used when performing eccentricity reduction. This will be discussed more in the eccentricity reduction section below</li>
</ul>
<h2><a class="anchor" id="autotoc_md18"></a>
Fields</h2>
<div class="fragment"><div class="line">fields</div>
<div class="line">{</div>
<div class="line">    conf on</div>
<div class="line">    lapse on</div>
<div class="line">    shift on</div>
<div class="line">}</div>
</div><!-- fragment --><p> Within the full Config or the output solutions, <code>Fields</code> document the fields that are used in the solver and stored in the <code>dat</code> file. Changing this has no impact.</p>
<h2><a class="anchor" id="autotoc_md19"></a>
Stages</h2>
<div class="fragment"><div class="line">stages</div>
<div class="line">{</div>
<div class="line">    ecc_red on</div>
<div class="line">    total_bc on</div>
<div class="line">}</div>
</div><!-- fragment --><p>For the BBH, only the <code>TOTAL_BC</code> and <code>ECC_RED</code> stages are relevant. Old stages available in the original v1 solver are since deprecated.</p>
<h2><a class="anchor" id="autotoc_md20"></a>
Relevant Controls</h2>
<div class="fragment"><div class="line">sequence_controls</div>
<div class="line">{</div>
<div class="line">    centralized_cos on</div>
<div class="line">    checkpoint off</div>
<div class="line">    corot_binary off</div>
<div class="line">    fixed_lapse off</div>
<div class="line">    resolve off</div>
<div class="line">    sequences on</div>
<div class="line">    use_pn off</div>
<div class="line">}</div>
</div><!-- fragment --><ul>
<li><code>checkpoint</code>: this will result in checkpoints being saved to file during each solving iteration - mainly helpful for high resolution binary ID where walltimes or server failures are a concern prior to a converged solution being obtained</li>
<li><code>corot_binary</code>: the objects are no longer fixed based on <code>chi</code> and instead provide a corotating ID solution</li>
<li><code>fixed_lapse</code>: toggling this control enables a fixed lapse on the horizon - not recommended</li>
<li><code>sequences</code>: this toggle is enabled by default and essentially tells the driver routine to start from scratch. If this is enabled when attempting to use a previous solution, the previous fields and numerical space (i.e. the <code>dat</code> file) is ignored</li>
<li><code>use_pn</code>: toggle whether to always use 3.5PN estimates. It is important to ensure this is off if the user wants to specify their own <code>adot</code> and <code>global_omega</code> parameters by hand (e.g. for iterative eccentricity reduction)</li>
<li><code>resolve</code>: force all implicit compact object solutions to be resolved regardless of an existing previous solution</li>
<li><code>centralized_cos</code>: stores all implicit COs into <code>$HOME_KADATH/COs</code></li>
</ul>
<h2><a class="anchor" id="autotoc_md21"></a>
Sequence Settings</h2>
<div class="fragment"><div class="line">sequence_settings</div>
<div class="line">{</div>
<div class="line">    solver_max_iterations 15</div>
<div class="line">    solver_precision 1e-08</div>
<div class="line">    initial_resolution 9</div>
<div class="line">}</div>
</div><!-- fragment --><ul>
<li><code>solver_max_iterations</code>: set the number of iterations not to exceed</li>
<li><code>solver_precision</code>: Determines what is the maximum precision allowed by the solver that determines whether or not the solution has converged</li>
<li><code>initial_resolution</code>: by default all solutions are ran at at a default resolution of <code>[9,9,8]</code> prior to regridding to a higher resolution. In the event one wants to increase the default <code>initial_resolution</code>, it can be done here</li>
</ul>
<h1><a class="anchor" id="autotoc_md22"></a>
Your Second run!</h1>
<p>Now that you've generated the simplest case and we have a better understanding of the config file, we can try something more interesting</p>
<ol type="1">
<li>Open the initial config file in your favorite editor</li>
</ol>
<ol type="1">
<li>Set the binary resolution: <code>res 11</code></li>
<li>For BH1 set:<ul>
<li><code>mch 0.1</code></li>
<li><code>chi -0.5</code></li>
</ul>
</li>
<li>For BH2 set:<ul>
<li><code>mch 0.9</code></li>
<li><code>chi 0.85</code></li>
</ul>
</li>
</ol>
<ol type="1">
<li>Run (using parallelization) using this config file, e.g. <code>mpirun ./bin/Release/solve initial_bh.info</code></li>
</ol>
<p>This time around we see the iterative <code>chi</code> increase being done for the primary BH, but overall the only changes observed are related to the isolated BH solvers (see the BH README for details), but the binary solver itself is consistent.</p>
<p>This results in the converged dataset of <code>BBH_ECC_RED.10.-0.5.0.85.1.q0.111111.2.0.11.info/dat</code></p>
<p>We can of course verify that the ID matches our expectation using</p>
<p><code>./bin/Release/reader BBH_ECC_RED.10.-0.5.0.85.1.q0.111111.2.0.11.info</code></p>
<div class="fragment"><div class="line">###################### BH_MINUS ######################</div>
<div class="line">            Center_COM = (-9.03308, 0, 0)</div>
<div class="line">            Coord R_IN = +0.03655</div>
<div class="line">               Coord R = +0.06982</div>
<div class="line">                SHELL1 = +0.25084</div>
<div class="line">                SHELL2 = +0.69164</div>
<div class="line">           Coord R_OUT = +1.98044</div>
<div class="line">               Areal R = +0.19319</div>
<div class="line">                 LAPSE = [+0.32662, +0.37621]</div>
<div class="line">                   PSI = [+1.64811, +1.68740]</div>
<div class="line">                  Mirr = +0.09659[+0.09659]</div>
<div class="line">                   Mch = +0.10000[+0.10000]</div>
<div class="line">                   Chi = -0.50000[-0.50000]</div>
<div class="line">                     S = -5.00000e-03</div>
<div class="line">                 Omega = +1.22845e+00</div>
<div class="line">###################### BH_PLUS ######################</div>
<div class="line">            Center_COM = (+0.96692, 0, 0)</div>
<div class="line">            Coord R_IN = +0.28503</div>
<div class="line">               Coord R = +0.47064</div>
<div class="line">           Coord R_OUT = +1.98044</div>
<div class="line">               Areal R = +1.57270</div>
<div class="line">                 LAPSE = [+0.27136, +0.31494]</div>
<div class="line">                   PSI = [+1.77691, +1.86173]</div>
<div class="line">                  Mirr = +0.78635[+0.78635]</div>
<div class="line">                   Mch = +0.90000[+0.90000]</div>
<div class="line">                   Chi = +0.85000[+0.85000]</div>
<div class="line">                     S = +6.88500e-01</div>
<div class="line">                 Omega = -3.14472e-01</div>
<div class="line">###################### Binary ######################</div>
<div class="line">                   RES = [+11,+11,+10]</div>
<div class="line">                     Q = +0.11111</div>
<div class="line">            Separation = +10.00 [+10.00] (+14.77km)</div>
<div class="line">         Orbital Omega = +2.76356e-02</div>
<div class="line">            Komar mass = +1.00272e+00</div>
<div class="line">              Adm mass = +1.00223e+00, Diff: +4.89197e-04</div>
<div class="line">            Total Mirr = +0.88294</div>
<div class="line">             Total Mch = +1.00000</div>
<div class="line">           Adm moment. = +1.01677e+00</div>
<div class="line">        Binding energy = +2.23086e-03</div>
<div class="line">               M * Ome = +2.76356e-02</div>
<div class="line">              E_b / mu = +2.47874e-02</div>
<div class="line">                    Px = +5.66564e-15</div>
<div class="line">                    Py = -7.33888e-16</div>
<div class="line">                    Pz = +0.00000e+00</div>
<div class="line">                  COMx = -4.03308e+00, A-COMx = -4.01442e+00</div>
<div class="line">                  COMy = +8.15763e-03, A-COMy = -9.11085e-03</div>
<div class="line">                A-COMz = +0.00000e+00</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md23"></a>
How BBH ID is Generated</h1>
<h2><a class="anchor" id="autotoc_md24"></a>
Initial Setup</h2>
<p>To generate the initial setup for BBH ID, we first need to make some guesses based on the input Christodoulou masses and the coordinate separation</p>
<ol type="1">
<li><code>COM</code> - An estimate of the center-of-mass: this is purely Newtonian</li>
<li><code>global_omega</code> - An estimate of the orbital frequency: 3.5th PN estimate</li>
</ol>
<p>Once these estimates are computed an interface code is ran which</p>
<ul>
<li>solves each BH configuration in isolation (See the <a href="https://bitbucket.org/fukaws/fuka/src/fuka/codes/FUKAv2_Solvers/BH/">BH README</a> for more details).</li>
<li>obtains boosted isolated solution using the estimated <code>global_omega</code></li>
</ul>
<p>At this point, the binary numerical space and fields are constructed and the isolated solutions are interpolated onto the new grid using the idea of super-imposed solutions. Specifically:</p>
<ul>
<li>a decay parameter <code>w</code> is chosen such that <code>w = distance / 2 =: decay_limit</code></li>
<li>the fields are interpolated such that the solutions decay exponentially away from each object as <code>decay_rate = exp(-(r_BH / w)^4)</code> where <code>r_BH</code> is the coordinate distance to the respective BH center</li>
<li>The resulting value at a given point is then simply the sum of the background with the deviations from the background from the isolated solutions</li>
</ul>
<p>For example, if we wanted to compute the initial guess for the lapse at a given point <code>x</code>, it would be</p>
<p><code>lapse(x) = 1. + decay_rate_BH1 * (lapse_BH1 - 1.) + decay_rate_BH2 * (lapse_BH2 - 1.)</code></p>
<p>This is then repeated for all fields in all numerical domains, with the compactified domain set to the asymptotic values of the fields, i.e. <code>lapse = psi = 1</code>, <code>shift = 0</code>.</p>
<h2><a class="anchor" id="autotoc_md25"></a>
TOTAL_BC Stage</h2>
<p>The <code>TOTAL_BC</code> stage solves the full XCTS system of equations consistently and all at once. The only thing that distinguishes <code>TOTAL_BC</code> from <code>ECC_RED</code> is that, by default, <code>TOTAL_BC</code> fixes the variable <code>global_omega</code> using the quasi-equilibrium assumption of <code>Madm == Mkomar</code> where as <code>ECC_RED</code> uses user-defined value for <code>ecc_omega</code> and <code>adot</code> or the built-in 3.5PN estimates. However, when running a new initial data sequence, the <code>global_omega</code> is initially fixed in the <code>TOTAL_BC</code> stage using the initial 3.5PN estimate prior to obtaining a quasi-equilibrium solution.</p>
<p>There is of course a very simple reason for this - otherwise the solution would diverge. Put simply, in ID generation of binary objects the shift is very sensitive in such systems and, as such, can cause wild changes in the solution before convergence is obtained, if at all. Additionally, the quasi-equilibrium equations for BBHs are evaluated at "infinity" on the surface of the compatified domain which is incredibly course. To get around these challenges, <code>global_omega</code> is fixed for one solving stage to allow all the fields to converge to a reasonable initial solution.</p>
<p>After this initial solution is obtained, the <code>fixed_omega</code> control is deactivated and the <code>TOTAL_BC</code> stage is reran with the quasi-equilibrium constraint. This is also done to ensure an accurate <code>COM</code> is found before obtaining 3.5PN estimates of the <code>global_omega</code> and <code>adot</code> within the <code>ECC_RED</code> stage.</p>
<h2><a class="anchor" id="autotoc_md26"></a>
ECC_RED Stage</h2>
<p>In this stage <code>global_omega</code> and <code>adot</code> are fixed to generate a less eccentric binary than when using a quasi-equilibrium approximation. After an initial 3.5PN estimate binary has been created, two new parameters appear called <code>ecc_omega</code> and <code>adot</code>.</p>
<ul>
<li>In the event <code>ecc_omega</code> or <code>adot</code> are not present in the config file, 3.5PN estimates will always be used</li>
<li>In the event the control <code>use_pn</code> is set to <code>on</code>, the values for <code>ecc_omega</code> and <code>adot</code> will <b>ALWAYS</b> be overwritten</li>
<li>In the event <code>ecc_omega</code> and <code>adot</code> are both set and <code>use_pn</code> is set to <code>off</code>, these parameters will only be used in the <code>ecc_red</code> stage regardless of whether previous stages are ran that change <code>global_omega</code><ul>
<li>For an example, say one wanted to generate initial data using configurations and eccentricity reduction parameters from a published dataset in the <a href="https://data.black-holes.org/waveforms/catalog.html">SXS database</a>, one could set <code>adot</code> and <code>ecc_omega</code> manually in the <code>initial_bbh.info</code> file and these values would be used in the <code>ECC_RED</code> stage. The <code>global_omega</code> parameter will also be updated to reflect this once a converged solution is obtained.</li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md27"></a>
Automated resolution increase</h3>
<p>Once the above procedures are completed for the last stage and the input <code>res</code> is higher than the <code>initial_resolution</code>, the low resolution solution is interpolated onto the higher resolution numerical grid and is used as the initial guess before running the last stage again. No additional iterative procedures are required at this point. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
