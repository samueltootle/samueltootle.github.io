<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FUKA: Binary Neutron Star</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<!-- <script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init()
</script> -->
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FUKA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('bnsxcts.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Binary Neutron Star </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md63"></a>
Binary Neutron Star (BNS)</h1>
<h1><a class="anchor" id="autotoc_md64"></a>
Overview</h1>
<p>Here lies the binary neutron star initial data solver and diagnostic codes. The initial data is constructed using maximal slicing with a flat spacial metric with which it is possible to achieve maximal spins up to approximately <code>[-0.6, 0.6]</code>. The v2 code is a considerable improvement over the v1 code as it uses superimposed NS solutions to initialize the binary instead of building the binary from equal mass, non-boosted TOV solutions followed by iterative changes to the binary components. When comparing to v1, generating equal-mass non-rotating is automated (i.e. the user no longer needs to perform the setup and solve separately), however, generating the ID is slightly slower due to needing to perform a stage of fixed orbital frequency prior to solving the hydro fields consistently. Most importantly, when generating arbitrary spin and unequal mass, the cost savings is roughly (N)x faster where N is, in the case of v1, the number of iterative solutions needed to achieve a given mass ratio and spin configurations.</p>
<p>Note: When referring to <code>Mtot</code> below, we will be referring to the sum of the ADM masses of the TOV solution as measured at infinite separation (i.e. isolated TOV solutions) - <code>Mtot := (MADM_MINUS + MADM_PLUS)</code> where plus and minus simply refer to their location on the x-axis.</p>
<h1><a class="anchor" id="autotoc_md65"></a>
Organization</h1>
<ol type="1">
<li><code>CMakeLists.txt</code> is the file needed by CMake to compile the codes</li>
<li><code>compile</code> is a symbolic link to the script stored in <code>$HOME_KADATH/build_release</code> to ease compiling</li>
<li><code>src</code> directory contains the relevant source files:<ul>
<li><code>solve.cpp</code>: the one and done solve code</li>
<li><code>reader.cpp</code>: the reader can provide diagnostics from ID solutions that are computed from the ID</li>
</ul>
</li>
</ol>
<h1><a class="anchor" id="autotoc_md66"></a>
Basic Usage</h1>
<ol type="1">
<li>Generate the initial config file by running <code>solve</code> for the first time</li>
<li>Modify the initial config file based on ID characteristics you are interested in</li>
<li>Rerun (using parallelization) using this config file, e.g. <code>mpirun ./bin/Release/solve initial_bns.info</code></li>
</ol>
<h1><a class="anchor" id="autotoc_md67"></a>
Your first run!</h1>
<ol type="1">
<li>Generate the initial config file by running <code>solve</code> for the first time</li>
<li>Rerun (using parallelization) using this config file, e.g. <code>mpirun ./bin/Release/solve initial_bns.info</code></li>
<li>This will result in the generation of a pair of files containing the solution: <code>BNS_ECC_RED.togashi.30.2.0.0.2.8.q1.0.0.09.&lt;info/dat&gt;</code></li>
</ol>
<p>We can deconstruct the name to make it understandable:</p>
<ul>
<li><code>BNS_ECC_RED.</code> denotes a converged BNS solution after the eccentricity reduction stage is completed which uses 3.5th order PN estimates for the orbital frequency and radial infall velocity. This is meant to distinguish the solution from earlier stages which will be discussed later.This also distinguishes it from checkpoints that can be turned on which are saved to file during each iteration of the solver</li>
<li><code>togashi</code>: the leading name of the eosfile</li>
<li><code>30.2</code>: separation distance in geometric units!</li>
<li><code>0.0.</code>: In this case, both NSs are not spinning</li>
<li><code>2.8.q1</code>: the total mass <code>2.8</code> and mass ratio <code>1</code></li>
<li><code>0.0.09</code>: <code>nshells = 0</code> for <code>ns1</code>, <code>nshells = 0</code> for <code>ns2</code> where the resolution in each domain is <code>9</code> collocation points in the radial and theta direction with <code>8</code> points in the phi direction</li>
<li><code>info</code>: The info file contains all the steering parameters, values used in creating the domain decomposition, stored fields, stages, settings, and controls</li>
<li><code>dat</code>: The dat file is a binary file that contains the numerical space and the variable fields</li>
</ul>
<p>The default configuration for BNS has a total mass of 2.8M and non-spinning. Aside from the diagnostics observed during the solver stage, we can use the reader to verify the ID. This can be done by running:</p>
<p><code>./bin/Release/reader BNS_ECC_RED.togashi.28.0.0.2.8.q1.0.0.09.info</code></p>
<p>Which results in the following:</p>
<div class="fragment"><div class="line">###################### NS_MINUS ######################</div>
<div class="line">            Center_COM = (-15.10000, 0, 0)</div>
<div class="line">            Coord R_IN = +3.16650</div>
<div class="line">               Coord R = [+5.95741,+6.12770] ([+8.79908,+9.05061] km)</div>
<div class="line">           Coord R_OUT = +9.25533</div>
<div class="line">               Areal R = +7.79075 [+11.50693km]</div>
<div class="line">         Baryonic Mass = +1.55246 (+0.52511,+1.02735,)</div>
<div class="line">     Isolated ADM Mass = +1.40000</div>
<div class="line">      Quasi-local Madm = +1.37747 Diff:+0.01609</div>
<div class="line">         Quasi-local S = -0.00000</div>
<div class="line">                   Chi = -0.00000 [+0.00000]</div>
<div class="line">                 Omega = +0.00004</div>
<div class="line">       x(max(Density)) = -15.10000 (-0.00000)</div>
<div class="line">       Central Density = +1.37420e-03</div>
<div class="line">        Central log(h) = +2.31777e-01</div>
<div class="line">      Central Pressure = +2.34368e-04</div>
<div class="line">    Central dlog(h)/dx = -2.16809e-16</div>
<div class="line">Central Euler Constant = -0.28321</div>
<div class="line">     Integrated log(h) = +186.21495</div>
<div class="line"> </div>
<div class="line">###################### NS_PLUS ######################</div>
<div class="line">            Center_COM = (+15.10000, 0, 0)</div>
<div class="line"> </div>
<div class="line">###################### Binary ######################</div>
<div class="line">                   RES = [+9,+9,+8]</div>
<div class="line">                     Q = +1.00000</div>
<div class="line">            Separation = +30.20 [+10.79] (+44.61km)</div>
<div class="line">         Orbital Omega = +0.00901</div>
<div class="line">            Komar mass = +2.77630</div>
<div class="line">              Adm mass = +2.77333, Diff: +0.00054</div>
<div class="line">     Total mass (Minf) = +2.80000</div>
<div class="line">           Adm moment. = +7.75720</div>
<div class="line">        Binding energy = -2.66666e-02</div>
<div class="line">            Minf * Ome = +2.52151e-02</div>
<div class="line">            E_b / Minf = -9.52380e-03</div>
<div class="line">               ADM P_x = -1.76726e-14</div>
<div class="line">               ADM P_y = +2.08646e-14</div>
<div class="line">               ADM P_z = +0.00000e+00</div>
<div class="line">                  COMx = -0.00000, A-COMx = -0.00000</div>
<div class="line">                  COMy = +0.00000, A-COMy = +0.00000</div>
<div class="line">                A-COMz = +0.00000</div>
</div><!-- fragment --><p>The first two blocks contain information related to the component NSs - the second has been abbreviated since it contains identical information. These details are covered in the <a href="https://bitbucket.org/fukaws/fuka/src/fuka/codes/FUKAv2_Solvers/NS/">NS README</a>. The only additional parameter is the <code>Center_COM</code>. This is the coordinate center of each object when shifted by the "center-of-mass" of the binary or, more specifically, the location of the axis of rotation for the binary that can approximate a quasi-stationary solution.</p>
<p>The third block contains information specifically related to the binary</p><ul>
<li><code>res</code>: resolution in each numerical domain <code>[r,theta,phi]</code></li>
<li><code>q</code>: mass ratio <code>q &lt;= 1</code></li>
<li><code>Separation</code>: coordinate separation <code>d [d/Mtot] (d in km)</code></li>
<li><code>Orbital Omega</code>: orbital frequency of the binary</li>
<li>Komar mass</li>
<li>ADM quantities</li>
<li><code>E_b / mu</code>: Binding energy normalized by the reduced mass</li>
<li><code>COM&lt;x/y&gt;</code>: shift in the coordinates to find a helical killing vector</li>
<li><code>A-COM&lt;x/y/z&gt;</code>: A numerical calculation of the COM based on the analytical prescription from Osokine+ (REF)</li>
</ul>
<p><b>Note: The <code>Diff</code> noted by the ADM mass is the symmetric difference between the ADM and Komar mass.</b></p>
<h1><a class="anchor" id="autotoc_md68"></a>
Understanding the BNS INFO file</h1>
<p>Using your favorite text editor, you can open up the <code>initial_bns.info</code>. We will go through the file, but we'll discuss only the details relevant to the BNS case. For details on all the parameters you can read more in the <a href="https://bitbucket.org/fukaws/fuka/src/fuka/include/Configurator/">Configurator README</a>.</p>
<p><b> Notes:</b></p>
<p><b></p><ol type="1">
<li>It is always best practice to generate new ID using the <code>initial_bns.info</code>. Using old initial data unless for very small changes in <code>chi</code> is inefficient.</li>
<li><p class="startli">In FUKAv2.2 a minimal Config file was introduced such that only the basic fixing parameters most relevant to users are shown. This minimal Config file can be bypassed by running: &gt; <code>solve full</code></p>
<p class="startli">to obtain the full Config file. Although useful for development, there is little advantage to using the full Config. </p>
</li>
</ol>
<p></b></p>
<p><b></b></p>
<h2><a class="anchor" id="autotoc_md69"></a>
BNS Fixing parameters</h2>
<p><b> </p><div class="fragment"><div class="line">binary</div>
<div class="line">{</div>
<div class="line">    distance 30.2</div>
<div class="line">    outer_shells 0</div>
<div class="line">    res 9</div>
<div class="line">    ns1</div>
<div class="line">    {</div>
<div class="line">        chi 0</div>
<div class="line">        madm 1.4</div>
<div class="line">        res 9</div>
<div class="line">        eosfile togashi.lorene</div>
<div class="line">        eostype Cold_Table</div>
<div class="line">    }</div>
<div class="line">    ns2</div>
<div class="line">    {</div>
<div class="line">        chi 0</div>
<div class="line">        madm 1.4</div>
<div class="line">        res 9</div>
<div class="line">        eosfile togashi.lorene</div>
<div class="line">        eostype Cold_Table</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p></b></p>
<p><b>The above includes parameters that can be fixed by the user as well as parameters that are automated in the background and should not be changed. The parameters for each NS are simply copied from the isolated solution which is discussed in detail in the <a href="https://bitbucket.org/fukaws/fuka/src/fukav2//codes/FUKAv2_Solvers/NS/">NS README</a> - the same fixing applies also in the BNS. The relevant parameters to discuss are</b></p>
<p><b></p><ul>
<li><code>res</code> The resolution shown for the individual compact objects is the highest resolution the <em>isolated</em> dataset will be ran at. This can be important for TOV solutions as the total baryonic mass is sensitive to the resolution. <code>res 11</code> is the minimum recommended for production runs</li>
</ul>
<p></b></p>
<p><b>The fixing parameters most relevant to the binary are</b></p>
<p><b></p><ul>
<li><code>distance</code>: this is in geometric units! It is important to pick something reasonable. A general rule for a binary with a few orbits is <code>distance = 10 * Mtot</code>, however this strongly depends on <code>q</code> and the spins of component objects</li>
<li><code>outer_shells</code>: This allows for additional shells to be placed near the compactified domain. This can be helpful for more accurate quasi-equilibrium ID at lower resolution, but otherwise can be ignored and left to <code>0</code></li>
<li><code>q</code>: this parameter is computed. Changing it by hand does nothing</li>
<li><code>res</code>: global resolution of the binary!</li>
<li><code>adot</code>: (optional) This is the radial infall velocity parameter when performing eccentricity reduction. This will be discussed more in the eccentricity reduction section below</li>
<li><code>ecc_omega</code>: (optional) This is the fixed orbital velocity parameter used when performing eccentricity reduction. This will be discussed more in the eccentricity reduction section below</li>
</ul>
<p></b></p>
<p><b></b></p>
<h2><a class="anchor" id="autotoc_md70"></a>
Fields</h2>
<p><b> </p><div class="fragment"><div class="line">fields</div>
<div class="line">{</div>
<div class="line">    conf on</div>
<div class="line">    lapse on</div>
<div class="line">    shift on</div>
<div class="line">    logh on  ; log specific enthalpy</div>
<div class="line">    phi on   ; fluid velocity potential</div>
<div class="line">}</div>
</div><!-- fragment --><p></b></p>
<p><b>Within the full Config or the output solutions, <code>Fields</code> document the fields that are used in the solver and stored in the <code>dat</code> file. Changing this has no impact.</b></p>
<p><b></b></p>
<h2><a class="anchor" id="autotoc_md71"></a>
Stages</h2>
<p><b> </p><div class="fragment"><div class="line">stages</div>
<div class="line">{</div>
<div class="line">    total on        ; hydrostatic-equilibrium stage</div>
<div class="line">    ecc_red on      ; eccentricity reduction stage - hydro-rescaling with fixed `global_omega`</div>
<div class="line">    total_bc on     ; hydro-rescaling stage with fixed `global_omega`</div>
<div class="line">}</div>
</div><!-- fragment --><p></b></p>
<p><b></b></p>
<h2><a class="anchor" id="autotoc_md72"></a>
Relevant Controls</h2>
<p><b> </p><div class="fragment"><div class="line">sequence_controls</div>
<div class="line">{</div>
<div class="line">    centralized_cos off</div>
<div class="line">    checkpoint off</div>
<div class="line">    corot_binary off</div>
<div class="line">    fixed_lapse off</div>
<div class="line">    resolve off</div>
<div class="line">    sequences on</div>
<div class="line">    use_pn off</div>
<div class="line">}</div>
</div><!-- fragment --><p></b></p>
<p><b></p><ul>
<li><code>checkpoint</code>: this will result in checkpoints being saved to file during each solving iteration - mainly helpful for high resolution binary ID where walltimes or server failures are a concern prior to a converged solution being obtained</li>
<li><code>corot_binary</code>: the objects are no longer fixed based on <code>chi</code> and instead provide a corotating ID solution</li>
<li><code>fixed_lapse</code>: toggling this control enables a fixed lapse on the horizon - not recommended</li>
<li><code>sequences</code>: this toggle is enabled by default and essentially tells the driver routine to start from scratch. If this is enabled when attempting to use a previous solution, the previous fields and numerical space (i.e. the <code>dat</code> file) is ignored</li>
<li><code>use_pn</code>: toggle whether to always use 3.5PN estimates. It is important to ensure this is off if the user wants to specify their own <code>adot</code> and <code>global_omega</code> parameters by hand (e.g. for iterative eccentricity reduction)</li>
<li><code>resolve</code>: force all implicit compact object solutions to be resolved regardless of an existing previous solution</li>
<li><code>centralized_cos</code>: stores all implicit COs into <code>$HOME_KADATH/COs</code></li>
</ul>
<p></b></p>
<p><b></b></p>
<h2><a class="anchor" id="autotoc_md73"></a>
Sequence Settings</h2>
<p><b> </p><div class="fragment"><div class="line">sequence_settings</div>
<div class="line">{</div>
<div class="line">    solver_max_iterations 15</div>
<div class="line">    solver_precision 1e-08</div>
<div class="line">    initial_resolution 9</div>
<div class="line">}</div>
</div><!-- fragment --><p></b></p>
<p><b></p><ul>
<li><code>solver_max_iterations</code>: set the number of iterations not to exceed</li>
<li><code>solver_precision</code>: Determines what is the maximum precision allowed by the solver that determines whether or not the solution has converged</li>
<li><code>initial_resolution</code>: the resolution to use when solving the binary initial before regridding to a higher resolution</li>
</ul>
<p></b></p>
<p><b></b></p>
<h1><a class="anchor" id="autotoc_md74"></a>
Your Second run!</h1>
<p><b> Now that you've generated the simplest case and we have a better understanding of the config file, we can try something more interesting</b></p>
<p><b></p><ol type="1">
<li>Open the initial config file in your favorite editor</li>
</ol>
<ol type="1">
<li>Set <code>distance 30.2</code></li>
</ol>
<ol type="1">
<li>(optional) set <code>res 11</code></li>
<li>For <code>ns1</code> set:<ul>
<li><code>madm 1.18</code></li>
<li><code>chi 0</code></li>
<li><code>res 11</code></li>
</ul>
</li>
<li>For <code>ns2</code> set:<ul>
<li><code>madm 2.42</code></li>
<li><code>chi 0.52</code></li>
<li><code>res 11</code></li>
</ul>
</li>
</ol>
<ol type="1">
<li>Run (using parallelization) using this config file, e.g. <code>mpirun ./bin/Release/solve initial_bns.info</code></li>
</ol>
<p></b></p>
<p><b>This time around we see the iterative <code>chi</code> increase being done for the primary NS as well as a regrid of the solution to the higher resolution before being imported into the initial binary setup. Overall, the main changes observed are related to the isolated NS solvers (see the <a href="https://bitbucket.org/fukaws/fuka/src/fukav2//codes/FUKAv2_Solvers/NS/">NS README</a> for details), but the binary solver itself is consistent when compared to the equal mass case.</b></p>
<p><b>In the event you changed the resolution to 11pts, the solver will solve the binary at the <code>initial_resolution</code> until a solution in hydrostatic equilibrium has been obtained. At this point the solution will be regridded to a higher resolution at which point the solver will go through all the activated stages (e.g. <code>TOTAL</code>, <code>TOTAL_BC</code>, and <code>ECC_RED</code>).</b></p>
<p><b>This results in the converged dataset of <code>BNS_ECC_RED.togashi.28.0.52.0.3.6.q0.487603.0.0.11.info/dat</code>, however, the other implicit solutions have been saved as well:</b></p>
<p><b></p><ol type="1">
<li><code>BNS_TOTAL_FIXED_OMEGA.</code>: is the initial solution after the import of the two isolated solutions have been solved in the binary space for a fixed COM and orbital frequency. The hydro fields are simply rescaled to enforce the specified baryonic mass, but the fluid is not in hydrostatic equilibrium</li>
<li><code>BNS_TOTAL.</code>: this is the solution in complete hydrostatic equilibrium with the ADM linear momenta and the orbital frequency being fixed by the force-balance equations for each NS</li>
<li><code>BNS_TOTAL_BC.</code>: is the iterative solution such that the orbital frequency is set to a constant and the remaining linear momenta are driven to zero by varying the COM. In this stage, the fluid deviates from hydrostatic equilibrium since the orbital frequency is a constant</li>
<li><code>BNS_ECC_RED.</code>: The final solution is one where the orbital frequency and radial infall velocity is fixed to either 3.5th order PN estimates based on the COM obtained in the <code>TOTAL_BC</code> stage or the values for <code>adot</code> and <code>ecc_omega</code> are used in the case of iterative eccentricity reduction</li>
</ol>
<p></b></p>
<p><b>We can of course verify that the ID matches our expectation using</b></p>
<p><b><code>./bin/Release/reader BNS_ECC_RED.togashi.30.2.0.0.52.3.6.q0.487603.0.0.09.info</code></b></p>
<p><b></p><div class="fragment"><div class="line">###################### NS_MINUS ######################</div>
<div class="line">            Center_COM = (-20.30785, 0, 0)</div>
<div class="line">            Coord R_IN = +2.92677</div>
<div class="line">               Coord R = [+5.86277,+6.23055] ([+8.65930,+9.20253] km)</div>
<div class="line">           Coord R_OUT = +9.18134</div>
<div class="line">               Areal R = +7.74374 [+11.43749km]</div>
<div class="line">         Baryonic Mass = +1.28557 (+0.35930,+0.92627,)</div>
<div class="line">     Isolated ADM Mass = +1.18000</div>
<div class="line">      Quasi-local Madm = +1.15484 Diff:+0.02132</div>
<div class="line">         Quasi-local S = -0.00000</div>
<div class="line">                   Chi = -0.00000 [+0.00000]</div>
<div class="line">                 Omega = +0.00009</div>
<div class="line">       x(max(Density)) = -15.10000 (-0.00000)</div>
<div class="line">       Central Density = +1.21999e-03</div>
<div class="line">        Central log(h) = +1.83561e-01</div>
<div class="line">      Central Pressure = +1.57389e-04</div>
<div class="line">    Central dlog(h)/dx = +1.50107e-15</div>
<div class="line">Central Euler Constant = -0.29321</div>
<div class="line">     Integrated log(h) = +141.79256</div>
<div class="line"> </div>
<div class="line">###################### NS_PLUS ######################</div>
<div class="line">            Center_COM = (+9.89215, 0, 0)</div>
<div class="line">            Coord R_IN = +1.84529</div>
<div class="line">               Coord R = [+3.74352,+4.72737] ([+5.52918,+6.98233] km)</div>
<div class="line">           Coord R_OUT = +9.18134</div>
<div class="line">               Areal R = +7.26845 [+10.73550km]</div>
<div class="line">         Baryonic Mass = +2.90866 (+0.76079,+2.14787,)</div>
<div class="line">     Isolated ADM Mass = +2.42000</div>
<div class="line">      Quasi-local Madm = +2.34788 Diff:+0.02980</div>
<div class="line">         Quasi-local S = +3.04533</div>
<div class="line">                   Chi = +0.52000 [+0.52000]</div>
<div class="line">                 Omega = +0.05322</div>
<div class="line">       x(max(Density)) = +15.10000 (+0.00000)</div>
<div class="line">       Central Density = +2.61945e-03</div>
<div class="line">        Central log(h) = +7.26408e-01</div>
<div class="line">      Central Pressure = +1.90375e-03</div>
<div class="line">    Central dlog(h)/dx = -2.43117e-15</div>
<div class="line">Central Euler Constant = -0.63951</div>
<div class="line">     Integrated log(h) = +528.05798</div>
<div class="line"> </div>
<div class="line">###################### Binary ######################</div>
<div class="line">                   RES = [+11,+11,+10]</div>
<div class="line">                     Q = +0.48760</div>
<div class="line">            Separation = +30.20 [+8.39] (+44.61km)</div>
<div class="line">         Orbital Omega = +0.00987</div>
<div class="line">            Komar mass = +3.56185</div>
<div class="line">              Adm mass = +3.56308, Diff: +0.00017</div>
<div class="line">     Total mass (Minf) = +3.60000</div>
<div class="line">           Adm moment. = +13.27756</div>
<div class="line">        Binding energy = -3.69181e-02</div>
<div class="line">            Minf * Ome = +3.55439e-02</div>
<div class="line">            E_b / Minf = -1.02550e-02</div>
<div class="line">               ADM P_x = -1.17145e-14</div>
<div class="line">               ADM P_y = +2.77465e-14</div>
<div class="line">               ADM P_z = +0.00000e+00</div>
<div class="line">                  COMx = -5.20785, A-COMx = +5.21460</div>
<div class="line">                  COMy = +0.05642, A-COMy = +0.00036</div>
<div class="line">                A-COMz = +0.00000</div>
</div><!-- fragment --><p></b></p>
<p><b></b></p>
<h1><a class="anchor" id="autotoc_md75"></a>
How BNS ID is Generated</h1>
<p><b> </b></p>
<h2><a class="anchor" id="autotoc_md76"></a>
Initial Setup</h2>
<p><b> To generate the initial setup for a BNS ID, we first need to make some guesses based on the input ADM masses and the coordinate separation</b></p>
<p><b></p><ol type="1">
<li><code>COM</code> - An estimate of the center-of-mass: this is purely Newtonian</li>
<li><code>global_omega</code> - An estimate of the orbital frequency: 3.5th PN estimate</li>
</ol>
<p></b></p>
<p><b>Once these estimates are computed an interface code is ran which</b></p>
<p><b></p><ul>
<li>solves each NS configuration in isolation (see the <a href="https://bitbucket.org/fukaws/fuka/src/fuka/codes/FUKAv2_Solvers/NS/">NS README</a> for more details).</li>
<li>obtains boosted isolated solutions using the estimated <code>global_omega</code></li>
</ul>
<p></b></p>
<p><b>At this point, the binary numerical space and fields are constructed and the isolated solutions are interpolated onto the new grid using the idea of superimposed solutions. Specifically:</b></p>
<p><b></p><ul>
<li>a decay parameter <code>decay_limit := w</code> is chosen such that <code>w = distance / 2</code></li>
<li>the fields are interpolated such that the solutions decay exponetially away from each object as <code>decay_rate = exp(-(r_NS / w)^4)</code> where <code>r_NS</code> is the coordinate distance to the respective NS</li>
<li>The resulting value at a given point is then simply the sum of the background with the deviations computed from the isolated solutions</li>
</ul>
<p></b></p>
<p><b>For example, if we wanted to compute the initial guess for the lapse at a given point <code>x</code>, it would be</b></p>
<p><b><code>lapse(x) = 1. + decay_rate_NS1 * (lapse_NS1(x) - 1.) + decay_rate_NS2 * (lapse_NS2(x) - 1.)</code></b></p>
<p><b>This is then repeated for all fields in all numerical domains, with the compactified domain set the asymptotic values of the fields, i.e. <code>lapse = psi = 1</code>, <code>log(h) = shift = 0</code>.</b></p>
<p><b></b></p>
<h2><a class="anchor" id="autotoc_md77"></a>
Initial Solution</h2>
<p><b> Once the initial guess has been setup for the BNS, the first solver stage solves the full XCTS system of equations consistently and all using a fixed orbital velocity. As a consequence the matter is simply rescaled to achieve the desired baryonic mass for each NS. The reason for this is two fold:</b></p>
<p><b></p><ol type="1">
<li>The spacetime fields need to settle to a more accurate estimate before resolving the matter consistently</li>
<li>The fluid velocity potential field <code>phi</code> needs to initialize more accurately to the binary configuration</li>
</ol>
<p></b></p>
<p><b>The output file from this stage, <code>BNS_TOTAL_FIXED_OMEGA.</code>, can readily be discarded once a solution from a later stage is obtained.</b></p>
<p><b></b></p>
<h2><a class="anchor" id="autotoc_md78"></a>
Hydrostatic Equilibrium</h2>
<p><b> Now with a more stable background, the matter becomes a variable field and is allowed to solve consistently in order to obtain hydrostatic equilibrium in the binary configuration. In this stage, the force balance equations are introduced which provides a quasi-equilibrium estimate of <code>global_omega</code> and one component of the ADM linear momenta is minimized.</b></p>
<p><b><b>Note: in the event one wants to later increase the resolution or make iterative changes (e.g. make small changes to the MADM, MB, CHI of one or both stars), it can only be done using the solution from this stage, <code>BNS_TOTAL.*&lt;info/dat&gt;</code>, as the initial starting point. Reusing the solutions from the hydro-rescaling stage will more often than not cause the solution to diverge or lead to unphysical results in the numerical evolution. Therefore, these solutions can be useful to retain.</b> to retain.**</b></p>
<p><b></b></p>
<h3><a class="anchor" id="autotoc_md79"></a>
Automated resolution increase</h3>
<p><b> In the event the binary resolution was set to something higher than the sequence_setting <code>initial_resolution</code>, the automated increase resolution will take place here and resolve the binary in hydro-static equilibrium. This is very important as increasing the resolution and repeating a matter-rescaling stage will result in a very inconsistent description of the fluid as it will include numerical errors from the interpolated solution at lower resolution!</b></p>
<p><b></b></p>
<h2><a class="anchor" id="autotoc_md80"></a>
Minimize Linear Momentum</h2>
<p><b> In this stage we return to simply rescaling the matter now that it has obtained a more consistent solution and we fix it to the current <code>global_omega</code>, however, we now minimize the x and y linear momentum components using the force-balance equations to determine the most accurante COM for the given binary. This is very important prior to the eccentricity reduction stage as a precise estimate of the COM is required for the post-Newtonian estimates.</b></p>
<p><b>The output file from this stage, <code>BNS_TOTAL_BC.</code>, can be discarded when no longer needed.</b></p>
<p><b></b></p>
<h2><a class="anchor" id="autotoc_md81"></a>
Eccentricity Reduction</h2>
<p><b> Using either 3.5PN estimates or, in the case of iterative eccentricity reduction, <code>ecc_omega</code> and <code>adot</code> from the config file, a final stage of matter rescaling is performed based on the changes introduced by <code>ecc_omega</code> and <code>adot</code>. This is the recommended solution to use for evolutions and it is stored with a filename title of <code>BNS_ECC_RED.*&lt;info/dat&gt;</code> </b></p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
