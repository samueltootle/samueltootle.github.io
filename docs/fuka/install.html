<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FUKA: Installation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<!-- <script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init()
</script> -->
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FUKA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('install.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Installation </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>To utilize the FUKA initial data codes and utilities, it is first necessary to compile the FUKA library which is composed both of the components related to the KADATH spectral library as well as FUKA specific solvers and supporting utilities along with the initial data exporters which are utilized when importing FUKA initial data into an evolution framework.</p>
<h1><a class="anchor" id="autotoc_md0"></a>
1. Dependencies</h1>
<p>FUKA initial data solvers require the following dependencies:</p><ol type="1">
<li>Compiler for C/C++ code (tested with Intel and GCC)</li>
<li>CMake &gt; 2.8</li>
<li>Boost libraries including <code>ptree</code></li>
<li>MPI (e.g. OpenMPI, Intel-MPI, MPT)</li>
<li>Git</li>
<li>ScaLAPACK - Parallel LAPACK package (MKL also works)</li>
<li>FFTW3</li>
<li>GSL</li>
</ol>
<p>For compiling the FUKA PythonTools, the following additional dependencies are needed</p><ol type="1">
<li>Python3</li>
<li>Boost libraries including <code>Python</code></li>
</ol>
<h4><a class="anchor" id="autotoc_md1"></a>
For compiling with &lt;tt&gt;GRHayLEOS&lt;/tt&gt; support:</h4>
<p>FUKA currently uses an extended version of the <code>GRHayL</code> library (pull request pending). To use GRHayL with FUKA, build using <code>additional_eos_tools</code> branch from <code>S. Tootle's</code> fork of <a href="https://github.com/samueltootle/GRHayL/">GRHayL</a></p>
<p>After installing <code>GRHayL</code>, set the environment variable <code>GRHAYL_ROOT</code> to the installation directory in order for FUKA's <code>cmake</code> build scripts to find it. Finally, <code>-DGRHAYL_EOS=ON</code> needs to be added to all cmake commands to ensure <code>GRHayL</code> support is active at build time.</p>
<h1><a class="anchor" id="autotoc_md2"></a>
2. Repository sync</h1>
<p>One can contain the latest version of FUKA using git using the following:</p>
<p><code>git clone <a href="https://bitbucket.org/fukaws/fuka">https://bitbucket.org/fukaws/fuka</a></code></p>
<p><b> Note:</b></p>
<p><b></p><ol type="1">
<li>The latest build is available under the <code>fuka</code> branch as opposed to master or main.</li>
<li>Stable releases are available as specific versions, e.g. <code>git checkout fukav2,2</code>.</li>
</ol>
<p></b></p>
<p><b></b></p>
<h1><a class="anchor" id="autotoc_md4"></a>
3. Environment Setup</h1>
<p>In order to build the FUKA library, it is mandatory that one sets the <code>HOME_KADATH</code> environment variable. If one is running linux, is at a bash command line interface, and is currently in the root directory of FUKA (e.g. <code>$HOME/fuka</code>), one can run</p>
<div class="fragment"><div class="line">export HOME_KADATH=`pwd`</div>
</div><!-- fragment --><p>Furthermore, if one wants to utilize the <code>compile</code> build script (see below), it is necessary to set these additional environment variables:</p>
<ol type="1">
<li><code>KAD_CC</code> - e.g. <code>export KAD_CC=gcc</code></li>
<li><code>KAD_CXX</code> - e.g. <code>export KAD_CC=g++</code></li>
<li><code>KAD_NUMC</code> - e.g. <code>export KAD_NUMC=7</code> (number of parallel build tasks)</li>
<li><code>GRHAYL_ROOT</code> - (optional) the installation path for the <code>GRHayL</code> library</li>
</ol>
<p>Finally, one can ensure these are loaded whenever starting a new terminal session by setting the same commands in the user's RC file (e.g. <code>$HOME/.bashrc</code>, for bash).</p>
<h1><a class="anchor" id="autotoc_md5"></a>
4. Cmake Setup</h1>
<p>To ensure <code>cmake</code> is able to find all of the necessary libraries, it is important to set these dependencies manually especially on high performance computing clusters where packages are installed in non-default locations. To do so, one needs to modify the file <code>Cmake/CMakeLocal.cmake</code>. The default looks like the follow:</p>
<div class="fragment"><div class="line">set (PGPLOT_LIBRARIES &quot;/usr/lib/libpgplot.so.5&quot;)</div>
<div class="line">set (GSL_LIBRARIES &quot;/usr/lib/x86_64-linux-gnu/libgsl.so&quot;)</div>
<div class="line">set (SCALAPACK_LIBRARIES &quot;/usr/lib/x86_64-linux-gnu/libscalapack-openmpi.so&quot;)</div>
<div class="line">set (FFTW_LIBRARIES &quot;/usr/lib/x86_64-linux-gnu/libfftw3.so&quot;)</div>
<div class="line">set (BLAS_LIBRARIES &quot;/usr/lib/x86_64-linux-gnu/libblas.so&quot;)</div>
<div class="line">set (LAPACK_LIBRARIES &quot;/usr/lib/x86_64-linux-gnu/liblapack.so&quot;)</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md6"></a>
5. Compilation - Script</h1>
<p>To compile the FUKA library using the automated script, one can go to <code>$HOME_KADATH/build_release</code> and run the shell script using</p>
<p><code>. compile</code></p>
<p><b> This script may need to be modified to include <code>-DGRHAYL_EOS=ON</code> if GRHayL support is required. </b></p>
<p>So long as the previous steps have been done properly, compilation should be successful and the static library will be located in <code>$HOME_KADATH/lib/libkadath.a</code></p>
<h1><a class="anchor" id="autotoc_md7"></a>
6. Compilation - Manually</h1>
<ul>
<li>From <code>$HOME_KADATH/build_release</code> or <code>$HOME_KADATH/build_debug</code>, create a build directory where all of the temporary <code>cmake</code> and <code>make</code> files can be stored.</li>
<li>Invoke <code>cmake (options) ..</code> where options consist of:<ul>
<li><code>-DPAR_VERSION = On/Off (On)</code> Set to On to build the MPI parallel version of the library. The initial data codes within this branch are only designed for use with MPI.</li>
<li><code>-DCMAKE_BUILD_TYPE = Release/Debug</code> Specifies the build type</li>
<li><code>-DMPI_CXX_COMPILER=mpicxx</code> Path to the MPI C++ wrapper (when not automatically detected by cmake)</li>
<li><code>-DMPI_C_COMPILER=mpicc</code> Path to the MPI C wrapper (when not automatically detected by cmake)</li>
<li><code>-DGRHAYL_EOS=OFF</code> Set to <code>ON</code> to enable <code>GRHayLEOS</code> support</li>
</ul>
</li>
<li>Once cmake has been successfully invoked, use <code>make -j $KAD_NUMC</code> or specify the number of parallel tasks manually to start the compilation.</li>
</ul>
<h1><a class="anchor" id="autotoc_md8"></a>
7. Compilation - Initial Data</h1>
<p>The latest solvers can be found in the <code>$HOME_KADATH/codes/FUKAv2_Solvers</code> base directory. As discussed in the <a href="index.html">Organization</a> section, all of the initial data solvers have a similar structure.</p>
<p>To compile an initial data solver once the FUKA library has been successfully compiled, enter the base directory for the solver, e.g. <code>$HOME_KADATH/codes/FUKAv2_Solvers/BH</code> and execute the <code>compile</code> script.</p>
<p>Alternatively, one can follow the instructions for manual compilation as discussed previously.</p>
<p>After successful compilation, the binary files can be found in</p>
<p><code>&lt;basedir&gt;/bin/Release</code></p>
<h1><a class="anchor" id="autotoc_md9"></a>
8. Compilation - PythonTools</h1>
<p>Within <code>$HOME_KADATH/codes/PythonTools</code> one can build the Python libraries that allow for analyzing FUKA initial data solutions within Python. Furthermore, a set of Python utilities are available to quickly enable plotting 1D and 2D plots.</p>
<p>So long as the dependencies are met, compilation is can be done by using the <code>compile</code> script or by manually compilation as discussed previously.</p>
<p><b></b></p>
<p><b>Note: The handling of Python and Boost libraries utilizes cmake's built-in find capabilities to find Python and Boost libraries along with the compiled Boost modules. If you have Boost libraries installed correctly, but cmake does not find them, you can set the environment variable <code>BOOST_ROOT</code> to the base directory where Boost has been installed to.</b></p>
<p><b></b> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
